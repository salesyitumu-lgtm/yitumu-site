backend:
  name: github
  repo: salesyitumu-lgtm/yitumu-site
  branch: main
  base_url: https://www.yitumuglobal.com
  auth_endpoint: /api/auth

media_folder: "public/uploads"
public_folder: "/uploads"

locale: zh_Hans

collections:
  # 1) 全站设置（中文后台）
  - name: "settings"
    label: "站点设置"
    files:
      - name: "global"
        label: "全局设置"
        file: "src/content/settings/global.md"
        fields:
          # ===== 基础信息 =====
          - { label: "网站名称（选填）", name: "site_name", widget: "string", required: false }
          - { label: "默认语言（必填）", name: "default_locale", widget: "select", options: ["en","es","fr","de","it"], default: "en" }
          - { label: "销售邮箱（必填）", name: "sales_email", widget: "string", required: true }
          - { label: "WhatsApp号码（选填）", name: "whatsapp_number", widget: "string", required: false }
          - { label: "WhatsApp按钮文案（选填）", name: "whatsapp_label", widget: "string", required: false }
          - { label: "表单外部提交地址（选填）", name: "form_action", widget: "string", required: false }

          # ===== 导航文案（全部选填：不填则用默认英文）=====
          - { label: "Blog 菜单（EN）（选填）", name: "nav_blog_en", widget: "string", required: false }
          - { label: "Blog 菜单（ES）（选填）", name: "nav_blog_es", widget: "string", required: false }
          - { label: "Blog 菜单（FR）（选填）", name: "nav_blog_fr", widget: "string", required: false }
          - { label: "Blog 菜单（DE）（选填）", name: "nav_blog_de", widget: "string", required: false }
          - { label: "Blog 菜单（IT）（选填）", name: "nav_blog_it", widget: "string", required: false }

          - { label: "About 菜单（EN）（选填）", name: "nav_about_en", widget: "string", required: false }
          - { label: "About 菜单（ES）（选填）", name: "nav_about_es", widget: "string", required: false }
          - { label: "About 菜单（FR）（选填）", name: "nav_about_fr", widget: "string", required: false }
          - { label: "About 菜单（DE）（选填）", name: "nav_about_de", widget: "string", required: false }
          - { label: "About 菜单（IT）（选填）", name: "nav_about_it", widget: "string", required: false }

          - { label: "Contact 菜单（EN）（选填）", name: "nav_contact_en", widget: "string", required: false }
          - { label: "Contact 菜单（ES）（选填）", name: "nav_contact_es", widget: "string", required: false }
          - { label: "Contact 菜单（FR）（选填）", name: "nav_contact_fr", widget: "string", required: false }
          - { label: "Contact 菜单（DE）（选填）", name: "nav_contact_de", widget: "string", required: false }
          - { label: "Contact 菜单（IT）（选填）", name: "nav_contact_it", widget: "string", required: false }

          # ===== 语言选择器文案（选填）=====
          - { label: "语言标签（EN）（选填）", name: "lang_label_en", widget: "string", required: false }
          - { label: "语言标签（ES）（选填）", name: "lang_label_es", widget: "string", required: false }
          - { label: "语言标签（FR）（选填）", name: "lang_label_fr", widget: "string", required: false }
          - { label: "语言标签（DE）（选填）", name: "lang_label_de", widget: "string", required: false }
          - { label: "语言标签（IT）（选填）", name: "lang_label_it", widget: "string", required: false }

  # 2) 类目（文件名即 slug；无需额外 slug 字段）
  - name: "categories"
    label: "类目管理"
    folder: "src/content/categories"
    create: true
    slug: "{{slug}}"
    summary: "{{filename}}"
    fields:
      - { label: "排序（越小越靠前）（必填）", name: "order", widget: "number", value_type: "int", default: 1 }
      - { label: "是否展示（必填）", name: "enabled", widget: "boolean", default: true }
      - { label: "英文类目名（必填）", name: "name_en", widget: "string" }
      - { label: "西班牙语类目名（选填）", name: "name_es", widget: "string", required: false }
      - { label: "法语类目名（选填）", name: "name_fr", widget: "string", required: false }
      - { label: "德语类目名（选填）", name: "name_de", widget: "string", required: false }
      - { label: "意大利语类目名（选填）", name: "name_it", widget: "string", required: false }

  # 3) 产品（扁平字段版：与 Astro schema 完全一致）
  - name: "products"
    label: "产品管理"
    folder: "src/content/products"
    create: true
    slug: "{{slug}}"
    summary: "{{title_en}} ({{category}})"
    fields:
      # ⚠️ 重要：不要在 frontmatter 里再写 slug 字段
      # 文件名就是 slug（entry.slug），前端用 p.slug 即可

      - { label: "状态（必填）", name: "status", widget: "select", options: ["active","draft"], default: "active" }

      - label: "所属类目（必填）"
        name: "category"
        widget: "relation"
        collection: "categories"
        search_fields: ["name_en","name_es","name_fr","name_de","name_it"]
        value_field: "{{slug}}"
        display_fields: ["name_en"]

      - { label: "型号 Model（选填）", name: "model", widget: "string", required: false }
      - { label: "MOQ（选填）", name: "moq", widget: "string", required: false }
      - { label: "排序 order（选填，越小越靠前）", name: "order", widget: "number", value_type: "int", required: false }

      # ✅ images: string[]（每项是图片路径字符串）
      - label: "产品图 images（选填，可多张）"
        name: "images"
        widget: "list"
        required: false
        field: { label: "图片", name: "image", widget: "image" }
        # ↑ 这里 field 最终保存的是字符串（/uploads/xxx.jpg），不会生成对象数组

      # 标题（扁平字段）
      - { label: "标题-英文 title_en（必填）", name: "title_en", widget: "string" }
      - { label: "标题-西班牙语 title_es（选填）", name: "title_es", widget: "string", required: false }
      - { label: "标题-法语 title_fr（选填）", name: "title_fr", widget: "string", required: false }
      - { label: "标题-德语 title_de（选填）", name: "title_de", widget: "string", required: false }
      - { label: "标题-意大利语 title_it（选填）", name: "title_it", widget: "string", required: false }

      # 卖点（扁平字段，数组）
      - { label: "卖点-英文 features_en（选填，每条一行）", name: "features_en", widget: "list", required: false }
      - { label: "卖点-西班牙语 features_es（选填）", name: "features_es", widget: "list", required: false }
      - { label: "卖点-法语 features_fr（选填）", name: "features_fr", widget: "list", required: false }
      - { label: "卖点-德语 features_de（选填）", name: "features_de", widget: "list", required: false }
      - { label: "卖点-意大利语 features_it（选填）", name: "features_it", widget: "list", required: false }

      # 详情正文（扁平字段，markdown）
      - { label: "详情-英文 body_en（选填）", name: "body_en", widget: "markdown", required: false }
      - { label: "详情-西班牙语 body_es（选填）", name: "body_es", widget: "markdown", required: false }
      - { label: "详情-法语 body_fr（选填）", name: "body_fr", widget: "markdown", required: false }
      - { label: "详情-德语 body_de（选填）", name: "body_de", widget: "markdown", required: false }
      - { label: "详情-意大利语 body_it（选填）", name: "body_it", widget: "markdown", required: false }

      # 视频
      - { label: "视频类型 video_provider（必填）", name: "video_provider", widget: "select", options: ["none","cloudflare_stream","youtube"], default: "none" }
      - { label: "视频值 video_value（选填：YouTube链接/ID 或 Cloudflare Stream Embed URL/ID）", name: "video_value", widget: "string", required: false }

  # 4) 博客（保持不变）
  - name: "blog"
    label: "博客"
    folder: "src/content/blog"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    summary: "{{title_en}}"
    fields:
      - { label: "日期", name: "date", widget: "datetime" }
      - { label: "封面图(可选)", name: "cover", widget: "image", required: false }

      - { label: "标题-英文", name: "title_en", widget: "string" }
      - { label: "标题-西班牙语", name: "title_es", widget: "string", required: false }
      - { label: "标题-法语", name: "title_fr", widget: "string", required: false }
      - { label: "标题-德语", name: "title_de", widget: "string", required: false }
      - { label: "标题-意大利语", name: "title_it", widget: "string", required: false }

      - { label: "正文-英文", name: "body_en", widget: "markdown" }
      - { label: "正文-西班牙语", name: "body_es", widget: "markdown", required: false }
      - { label: "正文-法语", name: "body_fr", widget: "markdown", required: false }
      - { label: "正文-德语", name: "body_de", widget: "markdown", required: false }
      - { label: "正文-意大利语", name: "body_it", widget: "markdown", required: false }

      - { label: "视频类型", name: "video_provider", widget: "select", options: ["none","cloudflare_stream","youtube"], default: "none" }
      - { label: "视频值(可选)", name: "video_value", widget: "string", required: false }

  # 5) 页面内容（保持不变）
  - name: "pages"
    label: "页面内容"
    folder: "src/content/pages"
    create: false
    slug: "{{slug}}"
    summary: "{{filename}}"
    fields:
      - { label: "标题-英文", name: "title_en", widget: "string" }
      - { label: "标题-西班牙语", name: "title_es", widget: "string", required: false }
      - { label: "标题-法语", name: "title_fr", widget: "string", required: false }
      - { label: "标题-德语", name: "title_de", widget: "string", required: false }
      - { label: "标题-意大利语", name: "title_it", widget: "string", required: false }

      - { label: "副标题-英文", name: "subtitle_en", widget: "string", required: false }
      - { label: "副标题-西班牙语", name: "subtitle_es", widget: "string", required: false }
      - { label: "副标题-法语", name: "subtitle_fr", widget: "string", required: false }
      - { label: "副标题-德语", name: "subtitle_de", widget: "string", required: false }
      - { label: "副标题-意大利语", name: "subtitle_it", widget: "string", required: false }

      - { label: "正文-英文", name: "body_en", widget: "markdown", required: false }
      - { label: "正文-西班牙语", name: "body_es", widget: "markdown", required: false }
      - { label: "正文-法语", name: "body_fr", widget: "markdown", required: false }
      - { label: "正文-德语", name: "body_de", widget: "markdown", required: false }
      - { label: "正文-意大利语", name: "body_it", widget: "markdown", required: false }
